<div class="printable-section">
  <div class="relatorio-container">
    
    <div *ngIf="!chamados || chamados.length === 0" class="empty-state">
      <div class="empty-icon">ü§∑‚Äç‚ôÄÔ∏è</div>
      <h3>Nenhum chamado encontrado</h3>
      <p>Os filtros selecionados n√£o retornaram resultados. Tente ajustar os crit√©rios de busca.</p>
    </div>

    <div *ngIf="chamados && chamados.length > 0" class="table-container">
      
      <div class="table-header">
        <div class="table-info">
          <h3>üìã Resultados do Relat√≥rio</h3>
          <p>{{ chamados.length }} {{ chamados.length === 1 ? 'chamado encontrado' : 'chamados encontrados' }}</p>
        </div>
        <div class="table-actions">
          <button class="btn-action" (click)="exportarCSV()" title="Exportar para CSV">
            <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
            <span>CSV</span>
          </button>
          <button class="btn-action" (click)="imprimirRelatorio()" title="Imprimir Relat√≥rio">
            <svg viewBox="0 0 24 24"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><polyline points="6 14 6 22 18 22 18 14"></polyline></svg>
            <span>Imprimir</span>
          </button>
        </div>
      </div>

      <div class="table-responsive">
        <table class="relatorio-table">
          <thead>
            <tr>
              <th class="sortable" (click)="ordenarPor('numeroProtocolo')">N¬∫ Protocolo <span class="sort-indicator"></span></th>
              <th class="sortable" (click)="ordenarPor('cliente')">Cliente <span class="sort-indicator"></span></th>
              <th class="sortable" (click)="ordenarPor('status')">Status <span class="sort-indicator"></span></th>
              <th class="sortable" (click)="ordenarPor('dataAbertura')">Data/Hora <span class="sort-indicator"></span></th>
              <th class="sortable" (click)="ordenarPor('prioridade')">Prioridade <span class="sort-indicator"></span></th>
              <th class="sortable" (click)="ordenarPor('atendente')">Atendente <span class="sort-indicator"></span></th>
              <th class="actions-header">A√ß√µes</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let chamado of chamadosOrdenados; trackBy: trackByChamado" 
                class="table-row clickable-row"
                (click)="onRowClick(chamado)">
                
              <td data-label="Protocolo">
                <div class="protocol-wrapper">
                  <span class="protocol-number">#{{ chamado.numeroProtocolo }}</span>
                  <span *ngIf="chamado.isNovo" class="new-badge">NOVO</span>
                </div>
              </td>
              <td data-label="Cliente">
                <div class="client-info">
                  <span class="client-name">{{ chamado.cliente }}</span>
                  <span class="client-category">{{ chamado.categoria }}</span>
                </div>
              </td>
              <td data-label="Status">
                <span class="status-badge" [ngClass]="getStatusClass(chamado.status)">
                  <span class="status-dot"></span>
                  {{ getStatusLabel(chamado.status) }}
                </span>
              </td>
              <td data-label="Data/Hora">
                <div class="datetime-info">
                  <span class="date">{{ formatDate(chamado.dataAbertura) }}</span>
                  <span class="time">{{ chamado.horaAbertura }}</span>
                </div>
              </td>
              <td data-label="Prioridade">
                <span class="priority-badge" [class]="getPrioridadeClass(chamado.prioridade)">
                  <span class="priority-icon">{{ getPrioridadeIcon(chamado.prioridade) }}</span>
                  {{ getPrioridadeLabel(chamado.prioridade) }}
                </span>
              </td>
              <td data-label="Atendente">
                <div class="attendant-info">
                  <div class="attendant-avatar">{{ getInitials(chamado.atendente) }}</div>
                  <span class="attendant-name">{{ chamado.atendente }}</span>
                </div>
              </td>
              <td class="actions-cell" (click)="$event.stopPropagation()">
                <div class="action-buttons">
                  <button class="btn-action-small view" (click)="visualizarChamado(chamado)" title="Visualizar">
                    <svg viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                  </button>
                  <button class="btn-action-small edit" (click)="editarChamado(chamado)" title="Editar">
                    <svg viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>